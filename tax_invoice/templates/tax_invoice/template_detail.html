{% extends 'tax_invoice/base.html' %}
{% load static %}

{% block title %}{{ template.name }}{% endblock %}

{% block breadcrumb %}
<li class="breadcrumb-item"><a href="{% url 'tax_invoice:template_list' %}">Templates</a></li>
<li class="breadcrumb-item active">{{ template.name }}</li>
{% endblock %}

{% block tax_invoice_content %}
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1 class="h3 mb-0">{{ template.name }}</h1>
            <div class="btn-group" role="group">
                <a href="{% url 'tax_invoice:template_update' template.pk %}" class="btn btn-warning">
                    <i class="bi bi-pencil me-2"></i>Edit
                </a>
                <a href="{% url 'tax_invoice:template_delete' template.pk %}" class="btn btn-danger">
                    <i class="bi bi-trash me-2"></i>Delete
                </a>
                <a href="{% url 'tax_invoice:template_list' %}" class="btn btn-outline-secondary">
                    <i class="bi bi-arrow-left me-2"></i>Back to List
                </a>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-md-8">
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">Template Details</h6>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-6">
                        <h6>Basic Information</h6>
                        <ul class="list-unstyled">
                            <li><strong>Name:</strong> {{ template.name }}</li>
                            <li><strong>Type:</strong> <span class="badge bg-secondary">{{ template.get_template_type_display }}</span></li>
                            <li><strong>Status:</strong> 
                                {% if template.is_active %}
                                    <span class="badge bg-success">Active</span>
                                {% else %}
                                    <span class="badge bg-secondary">Inactive</span>
                                {% endif %}
                            </li>
                            <li><strong>Created:</strong> {{ template.created_at|date:"M d, Y H:i" }}</li>
                            {% if template.created_by %}
                            <li><strong>Created by:</strong> {{ template.created_by.get_full_name|default:template.created_by.username }}</li>
                            {% endif %}
                        </ul>
                    </div>
                    <div class="col-md-6">
                        <h6>Settings</h6>
                        <ul class="list-unstyled">
                            <li><i class="bi bi-{% if template.include_logo %}check text-success{% else %}x text-muted{% endif %}"></i> Include Logo</li>
                            <li><i class="bi bi-{% if template.include_qr_code %}check text-success{% else %}x text-muted{% endif %}"></i> Include QR Code</li>
                            <li><i class="bi bi-{% if template.include_bank_details %}check text-success{% else %}x text-muted{% endif %}"></i> Include Bank Details</li>
                            <li><i class="bi bi-{% if template.include_terms %}check text-success{% else %}x text-muted{% endif %}"></i> Include Terms & Conditions</li>
                        </ul>
                    </div>
                </div>
                
                {% if template.description %}
                <div class="mt-3">
                    <h6>Description</h6>
                    <p class="text-muted">{{ template.description }}</p>
                </div>
                {% endif %}
            </div>
        </div>

        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">Styling Options</h6>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-4">
                        <h6>Primary Color</h6>
                        <div class="d-flex align-items-center">
                            <div class="color-preview me-2" style="width: 30px; height: 30px; background-color: {{ template.primary_color }}; border: 1px solid #ddd; border-radius: 4px;"></div>
                            <span>{{ template.primary_color }}</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <h6>Secondary Color</h6>
                        <div class="d-flex align-items-center">
                            <div class="color-preview me-2" style="width: 30px; height: 30px; background-color: {{ template.secondary_color }}; border: 1px solid #ddd; border-radius: 4px;"></div>
                            <span>{{ template.secondary_color }}</span>
                        </div>
                    </div>
                    <div class="col-md-4">
                        <h6>Font Family</h6>
                        <span>{{ template.font_family }}</span>
                    </div>
                </div>
            </div>
        </div>

        {% if template.header_text or template.footer_text or template.terms_conditions %}
        <div class="card shadow mb-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">Content</h6>
            </div>
            <div class="card-body">
                {% if template.header_text %}
                <div class="mb-3">
                    <h6>Header Text</h6>
                    <p class="text-muted">{{ template.header_text }}</p>
                </div>
                {% endif %}
                
                {% if template.footer_text %}
                <div class="mb-3">
                    <h6>Footer Text</h6>
                    <p class="text-muted">{{ template.footer_text }}</p>
                </div>
                {% endif %}
                
                {% if template.terms_conditions %}
                <div class="mb-3">
                    <h6>Terms & Conditions</h6>
                    <p class="text-muted">{{ template.terms_conditions }}</p>
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}
    </div>
    
    <div class="col-md-4">
        <div class="card shadow">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">Quick Actions</h6>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <a href="{% url 'tax_invoice:template_update' template.pk %}" class="btn btn-warning">
                        <i class="bi bi-pencil me-2"></i>Edit Template
                    </a>
                    <a href="{% url 'tax_invoice:template_delete' template.pk %}" class="btn btn-danger">
                        <i class="bi bi-trash me-2"></i>Delete Template
                    </a>
                    <a href="{% url 'tax_invoice:template_list' %}" class="btn btn-outline-secondary">
                        <i class="bi bi-list me-2"></i>Back to List
                    </a>
                </div>
            </div>
        </div>
        
        <div class="card shadow mt-4">
            <div class="card-header py-3">
                <h6 class="m-0 font-weight-bold text-primary">Template Usage</h6>
            </div>
            <div class="card-body">
                <p class="text-muted small">
                    This template can be used when creating new tax invoices. 
                    It will automatically apply the styling and content settings defined above.
                </p>
                <a href="{% url 'tax_invoice:invoice_create' %}" class="btn btn-primary btn-sm">
                    <i class="bi bi-plus-circle me-2"></i>Create Invoice with Template
                </a>
            </div>
        </div>
    </div>
</div>
{% endblock %}
