{% extends 'data_cleaning_tool/base.html' %}
{% load static %}

{% block title %}Session Report - Data Cleaning Tool{% endblock %}

{% block content %}
<div class="row">
    <!-- Page Header -->
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h1 class="h2">
                <i class="fas fa-chart-bar text-info me-2"></i>
                Session Report
            </h1>
            <div>
                <a href="{% url 'data_cleaning_tool:session_detail' session.pk %}" class="btn btn-secondary me-2">
                    <i class="fas fa-arrow-left me-1"></i>Back to Session
                </a>
                <a href="{% url 'data_cleaning_tool:session_export' session.pk %}" class="btn btn-success">
                    <i class="fas fa-download me-1"></i>Export Report
                </a>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <!-- Report Summary -->
    <div class="col-12 mb-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-clipboard-list me-2"></i>Report Summary
                </h5>
            </div>
            <div class="card-body">
                <div class="row">
                    <div class="col-md-3 mb-3">
                        <div class="text-center">
                            <h3 class="text-primary mb-1">{{ session.records_processed|default:"0" }}</h3>
                            <p class="text-muted mb-0">Records Processed</p>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="text-center">
                            <h3 class="text-success mb-1">{{ session.records_cleaned|default:"0" }}</h3>
                            <p class="text-muted mb-0">Records Cleaned</p>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="text-center">
                            <h3 class="text-warning mb-1">{{ session.duplicates_found|default:"0" }}</h3>
                            <p class="text-muted mb-0">Duplicates Found</p>
                        </div>
                    </div>
                    <div class="col-md-3 mb-3">
                        <div class="text-center">
                            <h3 class="text-info mb-1">{{ session.errors_fixed|default:"0" }}</h3>
                            <p class="text-muted mb-0">Errors Fixed</p>
                        </div>
                    </div>
                </div>
                
                <div class="row mt-3">
                    <div class="col-md-6">
                        <label class="form-label fw-bold">Session Name:</label>
                        <p class="mb-0">{{ session.name }}</p>
                    </div>
                    <div class="col-md-6">
                        <label class="form-label fw-bold">Completion Date:</label>
                        <p class="mb-0">{{ session.completed_at|date:"M d, Y H:i" }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <!-- Detailed Results -->
    <div class="col-lg-8">
        <!-- Master Data Cleaning Results -->
        {% if session.clean_customers or session.clean_vendors or session.clean_items or session.clean_chart_of_accounts or session.clean_locations %}
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-database text-primary me-2"></i>Master Data Cleaning Results
                </h5>
            </div>
            <div class="card-body">
                {% if session.clean_customers %}
                <div class="mb-4">
                    <h6 class="text-primary">
                        <i class="fas fa-users me-2"></i>Customers
                    </h6>
                    <div class="row">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Total Records:</strong> {{ customer_stats.total|default:"0" }}</p>
                            <p class="mb-1"><strong>Cleaned:</strong> {{ customer_stats.cleaned|default:"0" }}</p>
                            <p class="mb-1"><strong>Duplicates Found:</strong> {{ customer_stats.duplicates|default:"0" }}</p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Format Standardized:</strong> {{ customer_stats.formats_standardized|default:"0" }}</p>
                            <p class="mb-1"><strong>Validation Errors:</strong> {{ customer_stats.validation_errors|default:"0" }}</p>
                            <p class="mb-1"><strong>Records Archived:</strong> {{ customer_stats.archived|default:"0" }}</p>
                        </div>
                    </div>
                    {% if customer_stats.issues %}
                    <div class="alert alert-warning mt-2">
                        <strong>Issues Found:</strong>
                        <ul class="mb-0 mt-2">
                            {% for issue in customer_stats.issues %}
                            <li>{{ issue }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% endif %}
                </div>
                {% endif %}

                {% if session.clean_vendors %}
                <div class="mb-4">
                    <h6 class="text-primary">
                        <i class="fas fa-building me-2"></i>Vendors
                    </h6>
                    <div class="row">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Total Records:</strong> {{ vendor_stats.total|default:"0" }}</p>
                            <p class="mb-1"><strong>Cleaned:</strong> {{ vendor_stats.cleaned|default:"0" }}</p>
                            <p class="mb-1"><strong>Duplicates Found:</strong> {{ vendor_stats.duplicates|default:"0" }}</p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Format Standardized:</strong> {{ vendor_stats.formats_standardized|default:"0" }}</p>
                            <p class="mb-1"><strong>Validation Errors:</strong> {{ vendor_stats.validation_errors|default:"0" }}</p>
                            <p class="mb-1"><strong>Records Archived:</strong> {{ vendor_stats.archived|default:"0" }}</p>
                        </div>
                    </div>
                    {% if vendor_stats.issues %}
                    <div class="alert alert-warning mt-2">
                        <strong>Issues Found:</strong>
                        <ul class="mb-0 mt-2">
                            {% for issue in vendor_stats.issues %}
                            <li>{{ issue }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% endif %}
                </div>
                {% endif %}

                {% if session.clean_items %}
                <div class="mb-4">
                    <h6 class="text-primary">
                        <i class="fas fa-box me-2"></i>Items
                    </h6>
                    <div class="row">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Total Records:</strong> {{ item_stats.total|default:"0" }}</p>
                            <p class="mb-1"><strong>Cleaned:</strong> {{ item_stats.cleaned|default:"0" }}</p>
                            <p class="mb-1"><strong>Duplicates Found:</strong> {{ item_stats.duplicates|default:"0" }}</p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Categories Standardized:</strong> {{ item_stats.categories_standardized|default:"0" }}</p>
                            <p class="mb-1"><strong>Codes Validated:</strong> {{ item_stats.codes_validated|default:"0" }}</p>
                            <p class="mb-1"><strong>Records Archived:</strong> {{ item_stats.archived|default:"0" }}</p>
                        </div>
                    </div>
                    {% if item_stats.issues %}
                    <div class="alert alert-warning mt-2">
                        <strong>Issues Found:</strong>
                        <ul class="mb-0 mt-2">
                            {% for issue in item_stats.issues %}
                            <li>{{ issue }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% endif %}
                </div>
                {% endif %}

                {% if session.clean_chart_of_accounts %}
                <div class="mb-4">
                    <h6 class="text-primary">
                        <i class="fas fa-diagram-3 me-2"></i>Chart of Accounts
                    </h6>
                    <div class="row">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Total Accounts:</strong> {{ coa_stats.total|default:"0" }}</p>
                            <p class="mb-1"><strong>Validated:</strong> {{ coa_stats.validated|default:"0" }}</p>
                            <p class="mb-1"><strong>Hierarchy Fixed:</strong> {{ coa_stats.hierarchy_fixed|default:"0" }}</p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Account Types Fixed:</strong> {{ coa_stats.types_fixed|default:"0" }}</p>
                            <p class="mb-1"><strong>Balances Validated:</strong> {{ coa_stats.balances_validated|default:"0" }}</p>
                            <p class="mb-1"><strong>Records Archived:</strong> {{ coa_stats.archived|default:"0" }}</p>
                        </div>
                    </div>
                    {% if coa_stats.issues %}
                    <div class="alert alert-warning mt-2">
                        <strong>Issues Found:</strong>
                        <ul class="mb-0 mt-2">
                            {% for issue in coa_stats.issues %}
                            <li>{{ issue }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% endif %}
                </div>
                {% endif %}

                {% if session.clean_locations %}
                <div class="mb-4">
                    <h6 class="text-primary">
                        <i class="fas fa-map-marker-alt me-2"></i>Locations
                    </h6>
                    <div class="row">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Total Records:</strong> {{ location_stats.total|default:"0" }}</p>
                            <p class="mb-1"><strong>Cleaned:</strong> {{ location_stats.cleaned|default:"0" }}</p>
                            <p class="mb-1"><strong>Duplicates Found:</strong> {{ location_stats.duplicates|default:"0" }}</p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Codes Standardized:</strong> {{ location_stats.codes_standardized|default:"0" }}</p>
                            <p class="mb-1"><strong>Hierarchy Fixed:</strong> {{ location_stats.hierarchy_fixed|default:"0" }}</p>
                            <p class="mb-1"><strong>Records Archived:</strong> {{ location_stats.archived|default:"0" }}</p>
                        </div>
                    </div>
                    {% if location_stats.issues %}
                    <div class="alert alert-warning mt-2">
                        <strong>Issues Found:</strong>
                        <ul class="mb-0 mt-2">
                            {% for issue in location_stats.issues %}
                            <li>{{ issue }}</li>
                            {% endfor %}
                        </ul>
                    </div>
                    {% endif %}
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}

        <!-- Transactional Data Cleaning Results -->
        {% if session.clean_sales or session.clean_purchases or session.clean_inventory_movements or session.clean_journal_entries %}
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-exchange-alt text-success me-2"></i>Transactional Data Cleaning Results
                </h5>
            </div>
            <div class="card-body">
                {% if session.clean_sales %}
                <div class="mb-4">
                    <h6 class="text-success">
                        <i class="fas fa-chart-line me-2"></i>Sales Data
                    </h6>
                    <div class="row">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Total Transactions:</strong> {{ sales_stats.total|default:"0" }}</p>
                            <p class="mb-1"><strong>Validated:</strong> {{ sales_stats.validated|default:"0" }}</p>
                            <p class="mb-1"><strong>Customer References Fixed:</strong> {{ sales_stats.customer_refs_fixed|default:"0" }}</p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Item References Fixed:</strong> {{ sales_stats.item_refs_fixed|default:"0" }}</p>
                            <p class="mb-1"><strong>Amounts Validated:</strong> {{ sales_stats.amounts_validated|default:"0" }}</p>
                            <p class="mb-1"><strong>Records Flagged:</strong> {{ sales_stats.flagged|default:"0" }}</p>
                        </div>
                    </div>
                </div>
                {% endif %}

                {% if session.clean_purchases %}
                <div class="mb-4">
                    <h6 class="text-success">
                        <i class="fas fa-shopping-cart me-2"></i>Purchase Data
                    </h6>
                    <div class="row">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Total Transactions:</strong> {{ purchase_stats.total|default:"0" }}</p>
                            <p class="mb-1"><strong>Validated:</strong> {{ purchase_stats.validated|default:"0" }}</p>
                            <p class="mb-1"><strong>Vendor References Fixed:</strong> {{ purchase_stats.vendor_refs_fixed|default:"0" }}</p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Item References Fixed:</strong> {{ purchase_stats.item_refs_fixed|default:"0" }}</p>
                            <p class="mb-1"><strong>Amounts Validated:</strong> {{ purchase_stats.amounts_validated|default:"0" }}</p>
                            <p class="mb-1"><strong>Records Flagged:</strong> {{ purchase_stats.flagged|default:"0" }}</p>
                        </div>
                    </div>
                </div>
                {% endif %}

                {% if session.clean_inventory_movements %}
                <div class="mb-4">
                    <h6 class="text-success">
                        <i class="fas fa-boxes me-2"></i>Inventory Movements
                    </h6>
                    <div class="row">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Total Movements:</strong> {{ inventory_stats.total|default:"0" }}</p>
                            <p class="mb-1"><strong>Validated:</strong> {{ inventory_stats.validated|default:"0" }}</p>
                            <p class="mb-1"><strong>Item References Fixed:</strong> {{ inventory_stats.item_refs_fixed|default:"0" }}</p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Location References Fixed:</strong> {{ inventory_stats.location_refs_fixed|default:"0" }}</p>
                            <p class="mb-1"><strong>Quantities Validated:</strong> {{ inventory_stats.quantities_validated|default:"0" }}</p>
                            <p class="mb-1"><strong>Records Flagged:</strong> {{ inventory_stats.flagged|default:"0" }}</p>
                        </div>
                    </div>
                </div>
                {% endif %}

                {% if session.clean_journal_entries %}
                <div class="mb-4">
                    <h6 class="text-success">
                        <i class="fas fa-journal-whills me-2"></i>Journal Entries
                    </h6>
                    <div class="row">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Total Entries:</strong> {{ journal_stats.total|default:"0" }}</p>
                            <p class="mb-1"><strong>Validated:</strong> {{ journal_stats.validated|default:"0" }}</p>
                            <p class="mb-1"><strong>Account References Fixed:</strong> {{ journal_stats.account_refs_fixed|default:"0" }}</p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Balances Validated:</strong> {{ journal_stats.balances_validated|default:"0" }}</p>
                            <p class="mb-1"><strong>Posting Dates Fixed:</strong> {{ journal_stats.posting_dates_fixed|default:"0" }}</p>
                            <p class="mb-1"><strong>Records Flagged:</strong> {{ journal_stats.flagged|default:"0" }}</p>
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}

        <!-- Financial Data Cleaning Results -->
        {% if session.clean_chart_of_accounts_detailed or session.clean_journal_vouchers or session.clean_ledgers or session.clean_cost_centers %}
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-calculator text-info me-2"></i>Financial Data Cleaning Results
                </h5>
            </div>
            <div class="card-body">
                {% if session.clean_chart_of_accounts_detailed %}
                <div class="mb-4">
                    <h6 class="text-info">
                        <i class="fas fa-sitemap me-2"></i>Detailed Chart of Accounts
                    </h6>
                    <div class="row">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Total Accounts:</strong> {{ coa_detailed_stats.total|default:"0" }}</p>
                            <p class="mb-1"><strong>Deep Validated:</strong> {{ coa_detailed_stats.deep_validated|default:"0" }}</p>
                            <p class="mb-1"><strong>Parent-Child Fixed:</strong> {{ coa_detailed_stats.parent_child_fixed|default:"0" }}</p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Account Rules Applied:</strong> {{ coa_detailed_stats.rules_applied|default:"0" }}</p>
                            <p class="mb-1"><strong>Balances Reconciled:</strong> {{ coa_detailed_stats.balances_reconciled|default:"0" }}</p>
                            <p class="mb-1"><strong>Records Flagged:</strong> {{ coa_detailed_stats.flagged|default:"0" }}</p>
                        </div>
                    </div>
                </div>
                {% endif %}

                {% if session.clean_journal_vouchers %}
                <div class="mb-4">
                    <h6 class="text-info">
                        <i class="fas fa-file-invoice me-2"></i>Journal Vouchers
                    </h6>
                    <div class="row">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Total Vouchers:</strong> {{ voucher_stats.total|default:"0" }}</p>
                            <p class="mb-1"><strong>Validated:</strong> {{ voucher_stats.validated|default:"0" }}</p>
                            <p class="mb-1"><strong>References Fixed:</strong> {{ voucher_stats.references_fixed|default:"0" }}</p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Amounts Balanced:</strong> {{ voucher_stats.amounts_balanced|default:"0" }}</p>
                            <p class="mb-1"><strong>Dates Standardized:</strong> {{ voucher_stats.dates_standardized|default:"0" }}</p>
                            <p class="mb-1"><strong>Records Flagged:</strong> {{ voucher_stats.flagged|default:"0" }}</p>
                        </div>
                    </div>
                </div>
                {% endif %}

                {% if session.clean_ledgers %}
                <div class="mb-4">
                    <h6 class="text-info">
                        <i class="fas fa-book me-2"></i>Ledgers
                    </h6>
                    <div class="row">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Total Ledgers:</strong> {{ ledger_stats.total|default:"0" }}</p>
                            <p class="mb-1"><strong>Balances Validated:</strong> {{ ledger_stats.balances_validated|default:"0" }}</p>
                            <p class="mb-1"><strong>Opening Balances Fixed:</strong> {{ ledger_stats.opening_balances_fixed|default:"0" }}</p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Closing Balances Fixed:</strong> {{ ledger_stats.closing_balances_fixed|default:"0" }}</p>
                            <p class="mb-1"><strong>Periods Reconciled:</strong> {{ ledger_stats.periods_reconciled|default:"0" }}</p>
                            <p class="mb-1"><strong>Records Flagged:</strong> {{ ledger_stats.flagged|default:"0" }}</p>
                        </div>
                    </div>
                </div>
                {% endif %}

                {% if session.clean_cost_centers %}
                <div class="mb-4">
                    <h6 class="text-info">
                        <i class="fas fa-target me-2"></i>Cost Centers
                    </h6>
                    <div class="row">
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Total Cost Centers:</strong> {{ cost_center_stats.total|default:"0" }}</p>
                            <p class="mb-1"><strong>Validated:</strong> {{ cost_center_stats.validated|default:"0" }}</p>
                            <p class="mb-1"><strong>Assignments Fixed:</strong> {{ cost_center_stats.assignments_fixed|default:"0" }}</p>
                        </div>
                        <div class="col-md-6">
                            <p class="mb-1"><strong>Hierarchy Fixed:</strong> {{ cost_center_stats.hierarchy_fixed|default:"0" }}</p>
                            <p class="mb-1"><strong>Allocations Validated:</strong> {{ cost_center_stats.allocations_validated|default:"0" }}</p>
                            <p class="mb-1"><strong>Records Flagged:</strong> {{ cost_center_stats.flagged|default:"0" }}</p>
                        </div>
                    </div>
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}

        <!-- Cleaning Actions Results -->
        {% if session.auto_merge_duplicates or session.auto_fill_mandatory_fields or session.auto_standardize_formats or session.auto_archive_obsolete %}
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-tools text-warning me-2"></i>Cleaning Actions Results
                </h5>
            </div>
            <div class="card-body">
                {% if session.auto_merge_duplicates %}
                <div class="mb-3">
                    <h6 class="text-warning">
                        <i class="fas fa-link me-2"></i>Auto-merge Duplicates
                    </h6>
                    <p class="mb-1"><strong>Duplicates Merged:</strong> {{ action_stats.duplicates_merged|default:"0" }}</p>
                    <p class="mb-1"><strong>Master Records Created:</strong> {{ action_stats.master_records_created|default:"0" }}</p>
                </div>
                {% endif %}

                {% if session.auto_fill_mandatory_fields %}
                <div class="mb-3">
                    <h6 class="text-warning">
                        <i class="fas fa-edit me-2"></i>Auto-fill Mandatory Fields
                    </h6>
                    <p class="mb-1"><strong>Fields Filled:</strong> {{ action_stats.fields_filled|default:"0" }}</p>
                    <p class="mb-1"><strong>Default Values Applied:</strong> {{ action_stats.default_values_applied|default:"0" }}</p>
                </div>
                {% endif %}

                {% if session.auto_standardize_formats %}
                <div class="mb-3">
                    <h6 class="text-warning">
                        <i class="fas fa-magic me-2"></i>Auto-standardize Formats
                    </h6>
                    <p class="mb-1"><strong>Phone Numbers Standardized:</strong> {{ action_stats.phones_standardized|default:"0" }}</p>
                    <p class="mb-1"><strong>Emails Standardized:</strong> {{ action_stats.emails_standardized|default:"0" }}</p>
                    <p class="mb-1"><strong>Addresses Standardized:</strong> {{ action_stats.addresses_standardized|default:"0" }}</p>
                </div>
                {% endif %}

                {% if session.auto_archive_obsolete %}
                <div class="mb-3">
                    <h6 class="text-warning">
                        <i class="fas fa-archive me-2"></i>Auto-archive Obsolete
                    </h6>
                    <p class="mb-1"><strong>Records Archived:</strong> {{ action_stats.records_archived|default:"0" }}</p>
                    <p class="mb-1"><strong>Archive Date Set:</strong> {{ action_stats.archive_dates_set|default:"0" }}</p>
                </div>
                {% endif %}
            </div>
        </div>
        {% endif %}

        <!-- Summary and Recommendations -->
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-lightbulb text-warning me-2"></i>Summary and Recommendations
                </h5>
            </div>
            <div class="card-body">
                <div class="mb-4">
                    <h6 class="text-primary">Session Summary</h6>
                    <p class="mb-0">{{ session.summary|default:"No summary available for this session." }}</p>
                </div>

                {% if recommendations %}
                <div class="mb-4">
                    <h6 class="text-success">Recommendations</h6>
                    <ul class="mb-0">
                        {% for recommendation in recommendations %}
                        <li>{{ recommendation }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}

                {% if next_steps %}
                <div>
                    <h6 class="text-info">Next Steps</h6>
                    <ul class="mb-0">
                        {% for step in next_steps %}
                        <li>{{ step }}</li>
                        {% endfor %}
                    </ul>
                </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- Sidebar -->
    <div class="col-lg-4">
        <!-- Export Options -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-download me-2"></i>Export Options
                </h5>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <a href="{% url 'data_cleaning_tool:session_export' session.pk %}?format=pdf" class="btn btn-outline-danger">
                        <i class="fas fa-file-pdf me-1"></i>Export as PDF
                    </a>
                    <a href="{% url 'data_cleaning_tool:session_export' session.pk %}?format=excel" class="btn btn-outline-success">
                        <i class="fas fa-file-excel me-1"></i>Export as Excel
                    </a>
                    <a href="{% url 'data_cleaning_tool:session_export' session.pk %}?format=csv" class="btn btn-outline-primary">
                        <i class="fas fa-file-csv me-1"></i>Export as CSV
                    </a>
                </div>
            </div>
        </div>

        <!-- Session Statistics -->
        <div class="card mb-4">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-chart-pie me-2"></i>Session Statistics
                </h5>
            </div>
            <div class="card-body">
                <div class="row text-center">
                    <div class="col-6 mb-3">
                        <h6 class="text-primary">Duration</h6>
                        <p class="h6 mb-0">{{ session.duration|default:"N/A" }}</p>
                    </div>
                    <div class="col-6 mb-3">
                        <h6 class="text-success">Success Rate</h6>
                        <p class="h6 mb-0">{{ success_rate|default:"N/A" }}%</p>
                    </div>
                    <div class="col-6 mb-3">
                        <h6 class="text-warning">Priority</h6>
                        <span class="badge bg-{{ session.priority|yesno:'danger,warning,info' }}">
                            {{ session.get_priority_display }}
                        </span>
                    </div>
                    <div class="col-6 mb-3">
                        <h6 class="text-info">Created By</h6>
                        <p class="small mb-0">{{ session.created_by.get_full_name|default:session.created_by.username }}</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">
                    <i class="fas fa-bolt me-2"></i>Quick Actions
                </h5>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <a href="{% url 'data_cleaning_tool:session_detail' session.pk %}" class="btn btn-outline-secondary">
                        <i class="fas fa-eye me-1"></i>View Session
                    </a>
                    <a href="{% url 'data_cleaning_tool:session_rerun' session.pk %}" class="btn btn-outline-warning">
                        <i class="fas fa-redo me-1"></i>Rerun Session
                    </a>
                    <a href="{% url 'data_cleaning_tool:session_list' %}" class="btn btn-outline-primary">
                        <i class="fas fa-list me-1"></i>All Sessions
                    </a>
                    <a href="{% url 'data_cleaning_tool:dashboard' %}" class="btn btn-outline-info">
                        <i class="fas fa-tachometer-alt me-1"></i>Dashboard
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}
