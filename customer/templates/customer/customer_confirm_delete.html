{% extends 'dashboard/dashboard.html' %}
{% load static %}

{% block title %}Delete Customer - Customer Management{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{% static 'css/customer/customer.css' %}">
{% endblock %}

{% block content %}
<div class="container-fluid">
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="card">
                <div class="card-header bg-danger text-white">
                    <h5 class="card-title mb-0">
                        <i class="bi bi-exclamation-triangle me-2"></i>Confirm Delete
                    </h5>
                </div>
                <div class="card-body text-center">
                    <i class="bi bi-exclamation-triangle display-1 text-danger mb-3"></i>
                    <h4>Are you sure you want to delete this customer?</h4>
                    <p class="text-muted">
                        This action cannot be undone. The customer and all its associated data will be permanently removed.
                    </p>
                    
                    <div class="alert alert-warning">
                        <strong>Customer Details:</strong><br>
                        <strong>Code:</strong> {{ customer.customer_code }}<br>
                        <strong>Name:</strong> {{ customer.customer_name }}<br>
                        <strong>Contact Person:</strong> {{ customer.contact_person|default:"Not specified" }}<br>
                        <strong>Email:</strong> {{ customer.email|default:"Not specified" }}<br>
                        <strong>Status:</strong> 
                        <span class="badge bg-{{ customer.is_active|yesno:'success,danger' }}">
                            {{ customer.is_active|yesno:'Active,Inactive' }}
                        </span>
                    </div>

                    <div class="alert alert-info">
                        <strong><i class="bi bi-info-circle me-1"></i>Important:</strong><br>
                        This customer may be referenced by Jobs, Quotations, GRNs, Documentation, Delivery Orders, or Crossstuffing records. 
                        If any of these records exist, the deletion will be prevented and you'll need to remove or update those records first.
                    </div>
                    
                    <form method="post">
                        {% csrf_token %}
                        <div class="d-flex justify-content-center gap-2">
                            <a href="{% url 'customer:customer_detail' customer.pk %}" class="btn btn-secondary">
                                <i class="bi bi-arrow-left me-1"></i>Cancel
                            </a>
                            <button type="submit" class="btn btn-danger">
                                <i class="bi bi-trash me-1"></i>Delete Customer
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="{% static 'js/customer/customer.js' %}"></script>
{% endblock %} 